{% extends "base.html" %}
{% load static %}

{% block title %}Question Maker{% endblock %}

{% block welcome_text %}
    <p style="color: #90C83C">Create and Manage Race Questions</p>
{% endblock %}

{% block content %}
    <div class="container">
        <div class="dashboard-box">
            <h3 class="text-center mb-4" style="color: #90C83C">Race Name</h3>
            <form method="POST" action="{% url 'manage_riddles' %}">
                {% csrf_token %}
                <div class="form-group">
                    <label for="raceName" class="form-label">Enter the title of the race</label>
                    <input type="text" id="raceName" name="race_name" class="input-field" required>
                </div>
            
                <h3 class="text-center my-4" style="color: #90C83C">Create Questions for the Race</h3>
            
                <div class="form-group">
                    <label for="zoneCount" class="form-label">How many zones?</label>
                    <input type="number" id="zoneCount" name="zoneCount" class="input-field" min="1" required>
                </div>
            
                <div class="form-group">
                    <label for="startLocation" class="form-label">Starting Location (This is where players will begin their hunt)</label>
                    <input type="text" id="startLocation" name="start_location" class="input-field" required>
                </div>
            
                <div class="form-group">
                    <label for="timeLimit" class="form-label">Time Limit (minutes)</label>
                    <input type="number" id="timeLimit" name="time_limit" class="input-field" min="1" value="60">
                </div>
            
                <button type="button" class="btn w-100 mb-4" onclick="generateZones()">
                    Generate Zones
                </button>
                
                <br>
                
                <div id="zonesContainer" class="zone-container mb-4"></div>
            
                <button type="submit" class="btn w-100 mt-4">Create Race</button>
            </form>
        </div>
    </div>

    <script>
        function generateZones() {
            let zoneCount = document.getElementById('zoneCount').value;
            let container = document.getElementById('zonesContainer');
            container.innerHTML = ''; // Clear previous zones
    
            for (let i = 1; i <= zoneCount; i++) {
                let zoneDiv = document.createElement('div');
                zoneDiv.classList.add('dashboard-box', 'mb-4');
    
                zoneDiv.innerHTML = `
                    <h4 class="mb-3" style="color: #90C83C">Zone ${i}</h4>
                    <div id="zone-${i}-questions">
                        <button type="button" class="btn mb-3" onclick="addQuestion(${i})">
                            + Add Question
                        </button>
                    </div>
                `;
                container.appendChild(zoneDiv);
            }
        }
    
        function addQuestion(zoneNumber) {
            let questionContainer = document.getElementById(`zone-${zoneNumber}-questions`);

            let questionGroup = document.createElement('div');
            questionGroup.classList.add('form-group', 'mb-3');

            let questionInput = document.createElement('input');
            questionInput.type = 'text';
            questionInput.classList.add('input-field', 'mb-2');
            questionInput.name = `zone-${zoneNumber}-questions[]`;  
            questionInput.placeholder = 'Enter question here...';

            let answerInput = document.createElement('input');
            answerInput.type = 'text';
            answerInput.classList.add('input-field');
            answerInput.name = `zone-${zoneNumber}-answers[]`;  
            answerInput.placeholder = 'Enter answer here...';

            questionGroup.appendChild(questionInput);
            questionGroup.appendChild(answerInput);
            questionContainer.appendChild(questionGroup);
        }
    </script>
{% endblock %}